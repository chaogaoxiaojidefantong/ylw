(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8eeaa2de"],{"76ea":function(t,e,s){},"7b58":function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"orderpage"},[s("div",{staticClass:"left"},[s("Card",{staticClass:"left-card"},[s("p",{attrs:{slot:"title"},slot:"title"},[t._v("购物车")]),s("a",{attrs:{slot:"extra"},on:{click:t.clearCartButton},slot:"extra"},[t._v("清空")]),t._l(t.shopcartList,function(e){return[s("div",{key:e.foodId},[s("hr"),s("Row",[s("Col",{attrs:{span:"5"}},[t._v(t._s(e.foodName))]),s("Col",{attrs:{span:"10"}},[s("ButtonGroup",{key:e.foodId},[s("Button",{attrs:{type:"primary"},on:{click:function(s){return t.cartReduceOneFood(e)}}},[t._v("-")]),s("Button",[t._v(t._s(e.foodNum))]),s("Button",{attrs:{type:"primary"},on:{click:function(s){return t.foodAddNum(e)}}},[t._v("+")])],1)],1),s("Col",{attrs:{span:"5"}},[t._v("数量:"+t._s(e.foodNum))])],1)],1)]}),s("hr"),s("b",{staticClass:"allPrice"},[t._v("￥"+t._s(t.cartObj.allPrice))])],2)],1),s("div",{staticClass:"right"},[s("p",{staticClass:"pp"},[t._v("收货地址")]),s("RadioGroup",{model:{value:t.selectAddressId,callback:function(e){t.selectAddressId=e},expression:"selectAddressId"}},[t._l(t.addressList,function(e){return[s("Radio",{key:e.addressId,attrs:{label:e.addressId}},[s("Card",{staticClass:"card"},[s("p",[t._v(t._s(e.userName))]),s("p",[t._v(t._s(e.userPhone))]),s("p",[t._v(t._s(e.userAddress))])])],1)]})],2),s("br"),s("Button",{attrs:{type:"primary"},on:{click:t.addButton}},[t._v("添加新地址")]),s("Form",{attrs:{"label-position":"left","label-width":100}},[s("FormItem",{attrs:{label:"送达时间"}},[s("TimePicker",{staticStyle:{width:"168px"},attrs:{confirm:"",placeholder:"Select time",format:"HH:mm",value:t.chooseTime},on:{"on-change":t.handleChange}})],1),s("FormItem",{attrs:{label:"订单备注"}},[s("Input",{model:{value:t.orderRemark,callback:function(e){t.orderRemark=e},expression:"orderRemark"}})],1)],1),s("alipay-img",{on:{ok:t.ok,cancel:t.cancel}},[t._v("确认下单")])],1)])},a=[],o=s("4ec3"),i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"alipay-img"},[r("Button",{attrs:{type:"error"},on:{click:function(e){t.modal1=!0}}},[t._t("default")],2),r("Modal",{on:{"on-ok":t.ok,"on-cancel":t.cancel},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[r("img",{staticClass:"im",attrs:{src:s("cdc7"),height:"400px",width:"300px"}})])],1)},d=[],n={name:"AlipayImg",data(){return{modal1:!1}},mounted(){},methods:{ok(){this.$emit("ok")},cancel(){this.$emit("cancel")}}},c=n,l=(s("dfc2"),s("2877")),u=Object(l["a"])(c,i,d,!1,null,null,null),h=u.exports,m={components:{AlipayImg:h},data(){return{selectAddressId:"",user:"",addressList:[],shopcartList:[],cartObj:"",orderRemark:"",nowHour:"",nowMinute:"",nowDay:"",timeList:[],chooseTime:""}},mounted(){let t=new Date;this.nowHour=t.getHours(),this.nowMinute=t.getMinutes(),this.nowDay=t.toLocaleDateString(),this.user=JSON.parse(localStorage.getItem("user"));let e={userId:this.user.userId};Object(o["x"])(e).then(t=>{this.addressList=t.data.data,0==this.addressList.length&&this.$Message.error("请先添加地址")});let s={userId:this.user.userId};Object(o["D"])(s).then(t=>{let e=t.data.data;this.shopcartList=e.foodVoList,this.cartObj=e.cart})},methods:{foodAddNum(t){let e={foodId:t.foodId,cartId:this.user.cartId,userId:this.user.userId};Object(o["n"])(e).then(t=>{let e=t.data.data;this.shopcartList=e.foodVoList,this.cartObj=e.cart})},cartReduceOneFood(t){let e={foodId:t.foodId,cartId:this.user.cartId,userId:this.user.userId};Object(o["o"])(e).then(t=>{let e=t.data.data;this.shopcartList=e.foodVoList,this.cartObj=e.cart})},clearCartButton(){let t={cartId:this.user.cartId};Object(o["h"])(t).then(t=>{this.$router.push({name:"blank"}),setTimeout(()=>{this.$router.push({name:"clientFoodList",query:{canteenId:this.canteenId}})},1)})},buyButton(){let t=this.selectAddressId,e="";e=this.chooseTime?this.nowDay+":"+this.chooseTime:this.nowDay+":"+this.nowHour+":"+this.nowMinute;let s=this.orderRemark;if(!t)return void this.$Message.error("请先选择地址");let r={addressId:t,orderTime:e,orderRemark:s,userId:this.user.userId};Object(o["d"])(r).then(t=>{this.$Message.success("下单成功"),this.$router.push({name:"canteenList"})})},handleChange(t){this.chooseTime=t},ok(){let t=this.selectAddressId,e="";e=this.chooseTime?this.nowDay+":"+this.chooseTime:this.nowDay+":"+this.nowHour+":"+this.nowMinute;let s=this.orderRemark;if(!t)return void this.$Message.error("请先选择地址");let r={addressId:t,orderTime:e,orderRemark:s,userId:this.user.userId};Object(o["d"])(r).then(t=>{this.$Message.success("下单成功"),this.$router.push({name:"canteenList"})})},addButton(){this.$router.push({name:"addresspage"})},cancel(){this.$Message.error("付款失败")}}},p=m,f=(s("c29e"),Object(l["a"])(p,r,a,!1,null,null,null));e["default"]=f.exports},"809c":function(t,e,s){},c29e:function(t,e,s){"use strict";var r=s("809c"),a=s.n(r);a.a},cdc7:function(t,e,s){t.exports=s.p+"img/alipay.4edbfcef.jpg"},dfc2:function(t,e,s){"use strict";var r=s("76ea"),a=s.n(r);a.a}}]);
//# sourceMappingURL=chunk-8eeaa2de.6519c09c.js.map